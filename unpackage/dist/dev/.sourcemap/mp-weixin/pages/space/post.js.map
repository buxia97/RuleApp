{"version":3,"sources":["uni-app:///main.js","webpack:///E:/APPpro/voss/RuleAppRro/pages/space/post.vue?b663","webpack:///E:/APPpro/voss/RuleAppRro/pages/space/post.vue?b9c0","webpack:///E:/APPpro/voss/RuleAppRro/pages/space/post.vue?9f4c","webpack:///E:/APPpro/voss/RuleAppRro/pages/space/post.vue?7c3b","uni-app:///pages/space/post.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","StatusBar","CustomBar","NavBar","AppStyle","id","postType","type","text","toid","pic","picList","token","currencyName","forwardJson","contentJson","postJson","shopJson","isOwO","owo","owoList","OwOtype","modalName","kaptchaUrl","verifyCode","verifyLevel","onPullDownRefresh","onHide","localStorage","onShow","that","onLoad","methods","back","uni","delta","reloadCode","getConfig","console","hideModal","toOwO","setOwO","OwO","getForwardInfo","url","header","method","dataType","success","fail","replaceAll","getSpaceInfo","getInfo","getPostInfo","addSpace","title","icon","duration","position","clearTimeout","setTimeout","editSpace","upload","count","sizeType","sourceType","filePath","name","formData","uploadVideo","compressed","picClose","list"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrCA;AAAA;AAAA;AAAA;AAAgnB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACgNpoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MAGAC;MACAC;MACAC;MACAC;IAEA;EACA;EACAC;IACA;EAEA;EACAC;IACAC;EACA;EACAC;IACA;IAKA;MACAC;IACA;EAEA;EACAC;IACA;IACAD;IAEAA;IAKA;MACAA;IACA;IACA;MACAA;MACA;QACAA;MACA;QACAA;MACA;IAEA;IAGA;MACAA;IACA;IACA;MACAA;MACA;QACAA;MACA;QACAA;MACA;IAEA;IACAA;IACAA;EAEA;EACAE;IACAC;MACAC;QACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACAb;MACAO;IACA;IACAO;MACA;MACA;QACA;UACA;UACAP;QACA;UACAQ;QACA;MAEA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACAV;MACA;QACAA;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;IACA;IACAW;MACA;MACA;MACAX;MACAA;IACA;IACAY;MACA;MACAZ;IACA;IACAa;MACA;MACA;MACA;QACA;QACA/B;MACA;MACA;QACA;QACA;MACA;MACAkB;QACAc;QACA5C;QACA6C;UACA;QACA;QACAC;QACAC;QACAC;UACAlB;UACA;YACAA;YACAA;UAEA;QACA;QACAmB;UACAnB;QACA;MACA;IAEA;IACAoB;MACA;IACA;IACAC;MACA;MACA;MACA;QACA;QACAvC;MACA;MACA;QACA;QACA;MACA;MACAkB;QACAc;QACA5C;QACA6C;UACA;QACA;QACAC;QACAC;QACAC;UACAlB;UACA;YACAA;YACAA;YACA;YACAtB;YACAA;YACAsB;YACAA;YACA;cACAA;cACA;gBACA;kBACAA;gBACA;kBACAA;gBACA;cACA;YACA;YAEA;cACAA;YACA;YACA;cACAA;YACA;YACA;cACAA;YACA;YACA;cACAA;YACA;UAEA;QACA;QACAmB;UACAnB;QACA;MACA;IAEA;IACAsB;MACA;MACA;QACA;QACA;MACA;MAEAtB;QACAc;QACA5C;QACA6C;UACA;QACA;QACAC;QACAC;QACAC;UACAd;UACA;YACAJ;UAIA;QACA;QACAmB;UACAf;QACA;MACA;IACA;IACAmB;MACA;MACA;QACA;MACA;MAEAvB;QACAc;QACA5C;QACA6C;UACA;QACA;QACAC;QACAC;QACAC;UACAd;UACA;YACAJ;UACA;QACA;QACAmB;UACAf;QACA;MACA;IACA;IACAoB;MACA;MACA;QACApB;UACAqB;UACAC;UACAC;UACAC;QACA;QAEA;UACAxB;YACAU;UACA;UACAe;QACA;QACA;MACA;MACA;QACA;UACAnD;QACA;MACA;MACA;QACA0B;UACAqB;UACAC;UACAC;UACAC;QACA;QACA;MACA;MACA;MACA;QACA;QACA;QACA;UACA;YACAhD;UACA;YACAA;UACA;QACA;QACAoB;MACA;MACA;QACA;UACAI;YACAqB;YACAC;YACAC;YACAC;UACA;UACA;QACA;MACA;MACAlD;MACAA;MAEA;QACA;UACAsB;UACA;QACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAI;QACAqB;MACA;MACAzB;QAEAc;QACA5C;QACA6C;UACA;QACA;QACAC;QACAC;QACAC;UACAlB;UACAA;UACA8B;YACA1B;UACA;UACAA;YACAqB;YACAC;UACA;UACA;YACA;cACA1B;YACA;UAEA;QACA;QACAmB;UACAnB;UACAA;UACA8B;YACA1B;UACA;UACAA;YACAqB;YACAC;UACA;UACAtB;QACA;MACA;IACA;IACA2B;MACA;MACA;QACA3B;UACAqB;UACAC;UACAC;UACAC;QACA;QAEA;UACAxB;YACAU;UACA;UACAe;QACA;QACA;MACA;MACA;QACA;UACAnD;QACA;MACA;MACA;QACA0B;UACAqB;UACAC;UACAC;UACAC;QACA;QACA;MACA;MACA;MACA;QACA;QACA;QACA;UACA;YACAhD;UACA;YACAA;UACA;QACA;QACAoB;MACA;MACA;QACA;UACAI;YACAqB;YACAC;YACAC;YACAC;UACA;UACA;QACA;MACA;MACAlD;MACAA;MACA;QACAH;QACAE;QACAC;QACAC;QACAC;QACAE;MACA;MACAsB;QACAqB;MACA;MACAzB;QAEAc;QACA5C;QACA6C;UACA;QACA;QACAC;QACAC;QACAC;UACAY;YACA1B;UACA;UACAA;YACAqB;YACAC;UACA;UACA;YACA;cACA1B;YACA;UAEA;QACA;QACAmB;UACAW;YACA1B;UACA;UACAA;YACAqB;YACAC;UACA;UACAtB;QACA;MACA;IACA;IACA4B;MACA;MACA5B;QACA6B;QAAA;QACAC;QACAC;QACAjB;UACAd;YACAqB;UACA;UACA;UACA;YACA;cACAX;cACAsB;cACAC;cACAC;gBACA;cACA;cACApB;gBACA;gBACAe;gBACA;kBACAH;oBACA1B;kBACA;gBACA;gBACA;gBACA;gBACAA;kBACAqB;kBACAC;gBACA;gBACA;kBACA;kBACA1B;gBACA;cACA;cAAAmB;gBACAW;kBACA1B;gBACA;cACA;YAGA;UACA;QACA;MACA;IACA;IACAmC;MACA;MAEAnC;QACA+B;QACAK;QACAtB;UACAd;YACAqB;UACA;UACA;UACA;YACAX;YACAsB;YACAC;YACAC;cACA;YACA;YACApB;cACAY;gBACA1B;cACA;cACA;cACA;cACAA;gBACAqB;gBACAC;cACA;cACA;gBACA;gBACA1B;cACA;YACA;YAAAmB;cACAf;gBACAqB;gBACAC;cACA;cACAI;gBACA1B;cACA;YACA;UAGA;QACA;MACA;IACA;IACAqC;MACA;MACA;MACA;MACA;QACA;UACAC;QACA;MACA;MACA1C;IACA;EACA;AACA;AAAA,2B","file":"pages/space/post.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat/dist/uni-stat.es.js';\nimport Vue from 'vue'\nimport Page from './pages/space/post.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./post.vue?vue&type=template&id=a7c28e7c&\"\nvar renderjs\nimport script from \"./post.vue?vue&type=script&lang=js&\"\nexport * from \"./post.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/space/post.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./post.vue?vue&type=template&id=a7c28e7c&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.type == 0 ? _vm.picList.length : null\n  var g1 =\n    _vm.type == 1 && _vm.contentJson != null && _vm.contentJson.cid != 0\n      ? _vm.contentJson.images.length\n      : null\n  var m0 =\n    _vm.type == 5 && _vm.shopJson != null && _vm.shopJson.id != 0\n      ? parseInt(_vm.shopJson.price)\n      : null\n  var g2 =\n    _vm.type == 6 && _vm.postJson != null && _vm.postJson.id != 0\n      ? _vm.postJson.images.length\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.pic = \"\"\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        m0: m0,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./post.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./post.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"user\" :class=\"$store.state.AppStyle\">\n\t\t<view class=\"header\" :style=\"[{height:CustomBar + 'px'}]\">\n\t\t\t<view class=\"cu-bar bg-white\" :style=\"{'height': CustomBar + 'px','padding-top':StatusBar + 'px'}\">\n\t\t\t\t<view class=\"action\" @tap=\"back\">\n\t\t\t\t\t<text class=\"cuIcon-back\"></text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"content text-bold\" :style=\"[{top:StatusBar + 'px'}]\">\n\t\t\t\t\t<block v-if=\"postType=='add'\">\n\t\t\t\t\t\t<block v-if=\"type==0\">\n\t\t\t\t\t\t\t发布新动态\n\t\t\t\t\t\t</block>\n\t\t\t\t\t\t<block v-if=\"type==1\">\n\t\t\t\t\t\t\t转发文章\n\t\t\t\t\t\t</block>\n\t\t\t\t\t\t<block v-if=\"type==2\">\n\t\t\t\t\t\t\t转发动态\n\t\t\t\t\t\t</block>\n\t\t\t\t\t\t<block v-if=\"type==4\">\n\t\t\t\t\t\t\t发布视频动态\n\t\t\t\t\t\t</block>\n\t\t\t\t\t\t<block v-if=\"type==5\">\n\t\t\t\t\t\t\t转发商品\n\t\t\t\t\t\t</block>\n\t\t\t\t\t\t<block v-if=\"type==6\">\n\t\t\t\t\t\t\t转发帖子\n\t\t\t\t\t\t</block>\n\t\t\t\t\t</block>\n\t\t\t\t\t<block v-else>\n\t\t\t\t\t\t编辑动态\n\t\t\t\t\t</block>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"action\">\n\t\t\t\t\t<!--  #ifdef H5 || APP-PLUS -->\n\t\t\t\t\t<block v-if=\"postType=='add'\">\n\t\t\t\t\t\t<button class=\"cu-btn round bg-gradual-orange\" @tap=\"addSpace()\">发布</button>\n\t\t\t\t\t</block>\n\t\t\t\t\t<block v-else>\n\t\t\t\t\t\t<button class=\"cu-btn round bg-gradual-orange\" @tap=\"editSpace()\">保存</button>\n\t\t\t\t\t</block>\n\t\t\t\t\t<!--  #endif -->\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<view :style=\"[{padding:NavBar + 'px 10px 0px 10px'}]\"></view>\n\t\t<form>\n\t\t\t<view class=\"cu-form-group\">\n\t\t\t\t<textarea maxlength=\"-1\" v-model=\"text\" placeholder=\"输入您现在的想法\"></textarea>\n\t\t\t</view>\n\t\t\t<!--  #ifdef H5 || APP-PLUS -->\n\t\t\t<view class=\"comments-owo space-owo\">\n\t\t\t\t<text class=\"cuIcon-emoji\" @tap=\"OwO\"></text>\n\t\t\t\t<!--表情-->\n\t\t\t\t<view class=\"owo\" v-if=\"isOwO\">\n\t\t\t\t\t<scroll-view class=\"owo-list\" scroll-y>\n\t\t\t\t\t\t<view class=\"owo-main\">\n\t\t\t\t\t\t\t<view class=\"owo-lit-box\" v-for=\"(item,index)  in owoList\" @tap=\"setOwO(item)\" :key=\"index\">\n\t\t\t\t\t\t\t\t<image :src=\"'/'+item.icon\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t</scroll-view>\n\t\t\t\t\t<view class=\"owo-type\">\n\t\t\t\t\t\t<view class=\"owo-box\" @tap=\"toOwO('paopao')\" :class=\"OwOtype=='paopao'?'cur':''\">\n\t\t\t\t\t\t\t泡泡\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"owo-box\" @tap=\"toOwO('adai')\" :class=\"OwOtype=='adai'?'cur':''\">\n\t\t\t\t\t\t\t阿呆\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"owo-box\" @tap=\"toOwO('alu')\" :class=\"OwOtype=='alu'?'cur':''\">\n\t\t\t\t\t\t\t阿鲁\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"owo-box\" @tap=\"toOwO('quyinniang')\" :class=\"OwOtype=='quyinniang'?'cur':''\">\n\t\t\t\t\t\t\t蛆音娘\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!--  #endif -->\n\t\t\t<block v-if=\"type==0\">\n\t\t\t\t<view class=\"grid flex-sub col-3 grid-square space-pic\">\n\t\t\t\t\t<view class=\"bg-img\" :style=\"'background-image:url('+item+');'\"\n\t\t\t\t\t v-for=\"(item,index) in picList\" :key=\"index\">\n\t\t\t\t\t <text class=\"cuIcon-close\" @tap=\"picClose(item)\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"space-upload\" v-if=\"picList.length < 9\" @tap=\"upload\">\n\t\t\t\t\t\t<text class=\"cuIcon-add\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t\t<block v-if=\"type==4\">\n\t\t\t\t<view class=\"grid flex-sub col-3 grid-square space-pic\">\n\t\t\t\t\t<view class=\"space-upload\" v-if=\"pic == ''\" @tap=\"uploadVideo\">\n\t\t\t\t\t\t<text class=\"cuIcon-add\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"space-upload \" v-if=\"pic != ''\">\n\t\t\t\t\t\t<text class=\"cuIcon-close bg-black\" @tap=\"pic=''\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t\t<block v-if=\"type==2\">\n\t\t\t\t<view class=\"grid flex-sub padding-sm bg-white\" v-if=\"forwardJson!=null\">\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"user-space-info\">\n\t\t\t\t\t\t<view class=\"user-space-text\">\n\t\t\t\t\t\t\t<text class=\"text-blue\">@{{forwardJson.userJson.name}}：</text>{{forwardJson.text}}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t\t<block  v-if=\"type==1\">\n\t\t\t\t<view class=\"grid flex-sub padding-lr margin-top-sm\" v-if=\"contentJson!=null&&contentJson.cid!=0\">\n\t\t\t\t\t<view class=\"user-post-info\">\n\t\t\t\t\t\t<view class=\"user-post-pic\" v-if=\"contentJson.images.length>0\">\n\t\t\t\t\t\t\t<image :src=\"contentJson.images[0]\" mode=\"widthFix\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"user-post-text\">\n\t\t\t\t\t\t\t<view class=\"user-post-title\">\n\t\t\t\t\t\t\t\t{{contentJson.title}}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"user-post-intro\">\n\t\t\t\t\t\t\t\t{{contentJson.text}}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t\t<block  v-if=\"type==5\">\n\t\t\t\t<view class=\"grid flex-sub padding-lr\" v-if=\"shopJson!=null&&shopJson.id!=0\">\n\t\t\t\t\t<view class=\"user-post-info\">\n\t\t\t\t\t\t<view class=\"user-post-pic\">\n\t\t\t\t\t\t\t<image :src=\"shopJson.imgurl\" mode=\"widthFix\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"user-post-text\">\n\t\t\t\t\t\t\t<view class=\"user-post-title\">\n\t\t\t\t\t\t\t\t{{shopJson.title}}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"user-post-intro\">\n\t\t\t\t\t\t\t\t<text class=\"text-red text-lg text-bold\">{{parseInt(shopJson.price)}} {{currencyName}}</text>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"user-post-intro\">\n\t\t\t\t\t\t\t\t<text class=\"text-gray text-sm\">剩余数量：{{shopJson.num}}</text>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t\t\n\t\t\t<block  v-if=\"type==6\">\n\t\t\t\t\n\t\t\t\t<view class=\"grid flex-sub padding-lr margin-top-sm\" v-if=\"postJson!=null&&postJson.id!=0\">\n\t\t\t\t\t<view class=\"user-post-info\">\n\t\t\t\t\t\t<view class=\"user-post-pic\" v-if=\"postJson.images.length>0\">\n\t\t\t\t\t\t\t<image :src=\"postJson.images[0]\" mode=\"widthFix\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"user-post-text\">\n\t\t\t\t\t\t\t<view class=\"user-post-title\">\n\t\t\t\t\t\t\t\t{{postJson.title}}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"user-post-intro\">\n\t\t\t\t\t\t\t\t{{postJson.text}}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t\t<!--  #ifdef MP -->\n\t\t\t<view class=\"all-btn\">\n\t\t\t\t<view class=\"user-btn flex flex-direction\">\n\t\t\t\t\t<block v-if=\"postType=='add'\">\t\t\n\t\t\t\t\t\t<button class=\"cu-btn bg-gradual-orange margin-tb-sm lg\" @tap=\"addSpace()\">发布</button>\n\t\t\t\t\t</block>\n\t\t\t\t\t<block v-else>\n\t\t\t\t\t\t<button class=\"cu-btn bg-gradual-orange margin-tb-sm lg\" @tap=\"editSpace()\">保存</button>\n\t\t\t\t\t</block>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<!--  #endif -->\n\t\t\t\n\t\t</form>\r\n\t\t<view class=\"cu-modal\" :class=\"modalName=='kaptcha'?'show':''\">\r\n\t\t\t<view class=\"cu-dialog kaptcha-dialog\">\r\n\t\t\t\t<view class=\"cu-bar bg-white justify-end\">\r\n\t\t\t\t\t<view class=\"content\">操作验证</view>\r\n\t\t\t\t\t<view class=\"action\" @tap=\"hideModal\">\r\n\t\t\t\t\t\t<text class=\"cuIcon-close\"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"kaptcha-form\">\r\n\t\t\t\t\t<view class=\"kaptcha-image\">\r\n\t\t\t\t\t\t<image :src=\"kaptchaUrl\" mode=\"widthFix\" @tap=\"reloadCode()\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"kaptcha-input\">\r\n\t\t\t\t\t\t<input name=\"input\" v-model=\"verifyCode\" placeholder=\"请输入验证码\"></input>\r\n\t\t\t\t\t\t<view class=\"cu-btn bg-blue\" @tap=\"addSpace\">确定</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport { localStorage } from '../../js_sdk/mp-storage/mp-storage/index.js'\n\t// #ifdef APP-PLUS\n\timport owo from '../../static/app-plus/owo/OwO.js'\n\t// #endif\n\t// #ifdef H5\n\timport owo from '../../static/h5/owo/OwO.js'\n\t// #endif\n\t// #ifdef MP\n\tvar owo = [];\n\t// #endif\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tStatusBar: this.StatusBar,\n\t\t\t\tCustomBar: this.CustomBar,\n\t\t\t\tNavBar:this.StatusBar +  this.CustomBar,\n\t\t\t\tAppStyle:this.$store.state.AppStyle,\n\t\t\t\t\n\t\t\t\tid:0,\n\t\t\t\tpostType:\"add\",\n\t\t\t\ttype:0,\n\t\t\t\ttext:\"\",\n\t\t\t\ttoid:0,\n\t\t\t\tpic:\"\",\n\t\t\t\tpicList:[],\n\t\t\t\ttoken:\"\",\n\t\t\t\tcurrencyName:\"\",\n\t\t\t\t\n\t\t\t\tforwardJson:null,\n\t\t\t\tcontentJson:null,\n\t\t\t\tpostJson:null,\n\t\t\t\tshopJson:null,\n\t\t\t\t\n\t\t\t\tisOwO:false,\n\t\t\t\towo:owo,\n\t\t\t\towoList:[],\n\t\t\t\tOwOtype:\"paopao\",\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tmodalName:null,\r\n\t\t\t\tkaptchaUrl:\"\",\r\n\t\t\t\tverifyCode:\"\",\r\n\t\t\t\tverifyLevel:0,\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tonPullDownRefresh(){\n\t\t\tvar that = this;\n\t\t\t\n\t\t},\n\t\tonHide() {\n\t\t\tlocalStorage.removeItem('getuid')\n\t\t},\n\t\tonShow(){\n\t\t\tvar that = this;\n\t\t\t// #ifdef APP-PLUS\n\t\t\t\n\t\t\t//plus.navigator.setStatusBarStyle(\"dark\")\n\t\t\t// #endif\n\t\t\tif(localStorage.getItem('token')){\n\t\t\t\tthat.token = localStorage.getItem('token');\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tonLoad(res) {\n\t\t\tvar that = this;\n\t\t\tthat.currencyName = that.$API.getCurrencyName();\n\t\t\t// #ifdef APP-PLUS || MP\n\t\t\tthat.NavBar = this.CustomBar;\n\t\t\t// #endif\n\t\t\t// #ifdef APP-PLUS || H5\n\t\t\tthat.owoList = that.owo.data.paopao.container;\n\t\t\t// #endif\n\t\t\tif(res.type){\n\t\t\t\tthat.type = res.type;\n\t\t\t}\n\t\t\tif(res.toid){\n\t\t\t\tthat.toid = res.toid;\n\t\t\t\tif(that.type==6){\n\t\t\t\t\tthat.getPostInfo();\n\t\t\t\t}else{\n\t\t\t\t\tthat.getInfo()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(res.postType){\n\t\t\t\tthat.postType = res.postType;\n\t\t\t}\n\t\t\tif(res.id){\n\t\t\t\tthat.id = res.id;\n\t\t\t\tif(that.postType=='add'){\n\t\t\t\t\tthat.getForwardInfo(that.id);\n\t\t\t\t}else{\n\t\t\t\t\tthat.getSpaceInfo();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\r\n\t\t\tthat.kaptchaUrl = that.$API.getKaptcha();\r\n\t\t\tthat.getConfig();\n\t\t\t\n\t\t},\n\t\tmethods: {\n\t\t\tback(){\n\t\t\t\tuni.navigateBack({\n\t\t\t\t\tdelta: 1\n\t\t\t\t});\n\t\t\t},\r\n\t\t\treloadCode(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar kaptchaUrl = that.$API.getKaptcha();\r\n\t\t\t\tvar num=Math.ceil(Math.random()*10);\r\n\t\t\t\tkaptchaUrl += \"?\"+num;\r\n\t\t\t\tthat.kaptchaUrl = kaptchaUrl;\r\n\t\t\t},\r\n\t\t\tgetConfig() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif(localStorage.getItem('AppInfo')){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tvar AppInfo = JSON.parse(localStorage.getItem('AppInfo'));\r\n\t\t\t\t\t\tthat.verifyLevel = AppInfo.verifyLevel;\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thideModal(e) {\r\n\t\t\t\tthis.modalName = null\r\n\t\t\t},\n\t\t\ttoOwO(text){\n\t\t\t\tvar that = this;\n\t\t\t\tthat.OwOtype = text;\n\t\t\t\tif(text==\"paopao\"){\n\t\t\t\t\tthat.owoList = that.owo.data.paopao.container;\n\t\t\t\t}\n\t\t\t\tif(text==\"adai\"){\n\t\t\t\t\tthat.owoList = that.owo.data.adai.container;\n\t\t\t\t}\n\t\t\t\tif(text==\"alu\"){\n\t\t\t\t\tthat.owoList = that.owo.data.alu.container;\n\t\t\t\t}\n\t\t\t\tif(text==\"quyinniang\"){\n\t\t\t\t\tthat.owoList = that.owo.data.quyinniang.container;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetOwO(data){\n\t\t\t\tvar that = this;\n\t\t\t\tvar text = data.data;\n\t\t\t\tthat.text+=text;\n\t\t\t\tthat.isOwO = false;\n\t\t\t},\n\t\t\tOwO(){\n\t\t\t\tvar that = this;\n\t\t\t\tthat.isOwO = !that.isOwO;\n\t\t\t},\n\t\t\tgetForwardInfo(toid){\n\t\t\t\tvar that = this;\n\t\t\t\tvar token = \"\";\n\t\t\t\tif(localStorage.getItem('userinfo')){\n\t\t\t\t\tvar userInfo = JSON.parse(localStorage.getItem('userinfo'));\n\t\t\t\t\ttoken=userInfo.token;\n\t\t\t\t}\n\t\t\t\tvar data = {\n\t\t\t\t\t\"id\":that.id,\n\t\t\t\t\t\"token\":token\n\t\t\t\t}\n\t\t\t\tthat.$Net.request({\n\t\t\t\t\turl: that.$API.spaceInfo(),\n\t\t\t\t\tdata:data,\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'Content-Type':'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t\tif(res.data.code==1){\n\t\t\t\t\t\t\tthat.forwardJson = res.data.data;\n\t\t\t\t\t\t\tthat.toid = res.data.data.id;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(res) {\n\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t},\n\t\t\treplaceAll(string, search, replace) {\n\t\t\t  return string.split(search).join(replace);\n\t\t\t},\n\t\t\tgetSpaceInfo(){\n\t\t\t\tvar that = this;\n\t\t\t\tvar token = \"\";\n\t\t\t\tif(localStorage.getItem('userinfo')){\n\t\t\t\t\tvar userInfo = JSON.parse(localStorage.getItem('userinfo'));\n\t\t\t\t\ttoken=userInfo.token;\n\t\t\t\t}\n\t\t\t\tvar data = {\n\t\t\t\t\t\"id\":that.id,\n\t\t\t\t\t\"token\":token\n\t\t\t\t}\n\t\t\t\tthat.$Net.request({\n\t\t\t\t\turl: that.$API.spaceInfo(),\n\t\t\t\t\tdata:data,\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'Content-Type':'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t\tif(res.data.code==1){\n\t\t\t\t\t\t\tthat.id = res.data.data.id;\n\t\t\t\t\t\t\tthat.type = res.data.data.type;\n\t\t\t\t\t\t\tvar text = res.data.data.text;\n\t\t\t\t\t\t\ttext = that.replaceAll(text,\"/r/n\",\"\\n\");\n\t\t\t\t\t\t\ttext = that.replaceAll(text,\"||rn||\",\"\\n\");\n\t\t\t\t\t\t\tthat.text = text;\n\t\t\t\t\t\t\tthat.toid = res.data.data.toid;\n\t\t\t\t\t\t\tif(res.data.data.pic){\n\t\t\t\t\t\t\t\tthat.pic = res.data.data.pic;\n\t\t\t\t\t\t\t\tif(that.type==0){\n\t\t\t\t\t\t\t\t\tif(that.pic.indexOf(\"||\")!=-1){\n\t\t\t\t\t\t\t\t\t\tthat.picList = that.pic.split(\"||\");\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tthat.picList = that.picList.push(that.pic);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(that.type==1){\n\t\t\t\t\t\t\t\tthat.contentJson = res.data.data.contentJson;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(that.type==5){\n\t\t\t\t\t\t\t\tthat.shopJson = res.data.data.shopJson;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(that.type==6){\n\t\t\t\t\t\t\t\tthat.postJson = res.data.data.postJson;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(that.type==2){\n\t\t\t\t\t\t\t\tthat.getForwardInfo(that.toid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(res) {\n\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t},\n\t\t\tgetInfo(){\n\t\t\t\tvar that = this;\n\t\t\t\tvar data = {\n\t\t\t\t\t\"key\":that.toid,\n\t\t\t\t\t\"isMd\":0,\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthat.$Net.request({\n\t\t\t\t\turl: that.$API.getContentsInfo(),\n\t\t\t\t\tdata:data,\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'Content-Type':'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t\t\t\tif(res.data.title){\n\t\t\t\t\t\t\tthat.contentJson = res.data;\n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(res) {\n\t\t\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetPostInfo(){\n\t\t\t\tvar that = this;\n\t\t\t\tvar data = {\n\t\t\t\t\t\"id\":that.toid,\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthat.$Net.request({\n\t\t\t\t\turl: that.$API.postInfoForum(),\n\t\t\t\t\tdata:data,\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'Content-Type':'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t\t\t\tif(res.data.code==1){\n\t\t\t\t\t\t\tthat.postJson = res.data.data;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(res) {\n\t\t\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\taddSpace(){\n\t\t\t\tvar that = this;\n\t\t\t\tif(that.token==\"\"){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t    title:\"请先登录\",\n\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\tposition:'bottom',\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t    url: '/pages/user/login'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tclearTimeout('timer')\n\t\t\t\t\t}, 1000)\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif(that.type==2){\n\t\t\t\t\tif (that.text == \"\") {\n\t\t\t\t\t\ttext = \"转发了动态\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (that.text == \"\") {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t    title:\"请输入动态内容\",\n\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\tposition:'bottom',\n\t\t\t\t\t});\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tvar text  = that.text;\n\t\t\t\tif(that.type==0){\n\t\t\t\t\tvar picList = that.picList;\n\t\t\t\t\tvar pic = \"\";\n\t\t\t\t\tfor(var i in picList){\n\t\t\t\t\t\tif(i==0){\n\t\t\t\t\t\t\tpic += picList[i];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tpic += \"||\"+picList[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthat.pic = pic;\n\t\t\t\t}\n\t\t\t\tif(that.type==4){\n\t\t\t\t\tif(that.pic==\"\"){\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t    title:\"请上传视频文件\",\n\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\t\tposition:'bottom',\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttext = text.replace(/\\r\\n/g,\"||rn||\");\n\t\t\t\ttext = text.replace(/\\n/g,\"||rn||\");\r\n\t\t\t\t\r\n\t\t\t\tif(that.verifyLevel>1){\r\n\t\t\t\t\tif (that.verifyCode == \"\") {\r\n\t\t\t\t\t\tthat.modalName = 'kaptcha'\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\n\t\t\t\tvar data = {\n\t\t\t\t\t\"type\":that.type,\n\t\t\t\t\t\"text\":text,\n\t\t\t\t\t\"toid\":that.toid,\n\t\t\t\t\t\"pic\":that.pic,\n\t\t\t\t\t\"token\":that.token,\r\n\t\t\t\t\t'verifyCode':that.verifyCode\n\t\t\t\t}\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: \"加载中\"\n\t\t\t\t});\n\t\t\t\tthat.$Net.request({\n\t\t\t\t\t\n\t\t\t\t\turl: that.$API.addSpace(),\n\t\t\t\t\tdata:that.$API.removeObjectEmptyKey(data),\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'Content-Type':'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tthat.modalName = null;\r\n\t\t\t\t\t\tthat.verifyCode = \"\";\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif(res.data.code==1){\n\t\t\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\t\t\tthat.back();\n\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tthat.modalName = null;\r\n\t\t\t\t\t\tthat.verifyCode = \"\";\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"网络开小差了哦\",\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tuni.stopPullDownRefresh()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\teditSpace(){\n\t\t\t\tvar that = this;\n\t\t\t\tif(that.token==\"\"){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t    title:\"请先登录\",\n\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\tposition:'bottom',\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t    url: '/pages/user/login'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tclearTimeout('timer')\n\t\t\t\t\t}, 1000)\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif(that.type==2){\n\t\t\t\t\tif (that.text == \"\") {\n\t\t\t\t\t\ttext = \"转发了动态\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (that.text == \"\") {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t    title:\"请输入动态内容\",\n\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\tposition:'bottom',\n\t\t\t\t\t});\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tvar text  = that.text;\n\t\t\t\tif(that.type==0){\n\t\t\t\t\tvar picList = that.picList;\n\t\t\t\t\tvar pic = \"\";\n\t\t\t\t\tfor(var i in picList){\n\t\t\t\t\t\tif(i==0){\n\t\t\t\t\t\t\tpic += picList[i];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tpic += \"||\"+picList[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthat.pic = pic;\n\t\t\t\t}\n\t\t\t\tif(that.type==4){\n\t\t\t\t\tif(that.pic==\"\"){\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t    title:\"请上传视频文件\",\n\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\t\tposition:'bottom',\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttext = text.replace(/\\r\\n/g,\"||rn||\");\n\t\t\t\ttext = text.replace(/\\n/g,\"||rn||\");\n\t\t\t\tvar data = {\n\t\t\t\t\tid:that.id,\n\t\t\t\t\ttype:that.type,\n\t\t\t\t\ttext:text,\n\t\t\t\t\ttoid:that.toid,\n\t\t\t\t\tpic:that.pic,\n\t\t\t\t\ttoken:that.token\n\t\t\t\t}\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: \"加载中\"\n\t\t\t\t});\n\t\t\t\tthat.$Net.request({\n\t\t\t\t\t\n\t\t\t\t\turl: that.$API.editSpace(),\n\t\t\t\t\tdata:that.$API.removeObjectEmptyKey(data),\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'Content-Type':'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif(res.data.code==1){\n\t\t\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\t\t\tthat.back();\n\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(res) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"网络开小差了哦\",\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tuni.stopPullDownRefresh()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tupload(){\n\t\t\t\tlet that = this\t\t\t\t\n\t\t\t\tuni.chooseImage({\n\t\t\t\t\tcount: 9,  // 最多可以选择的图片张数，默认9\n\t\t\t\t\tsizeType:['original'],\n\t\t\t\t\tsourceType: ['album', 'camera'], \n\t\t\t\t    success: function (res) {\t\t\t\t\t\t\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: \"加载中\"\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\n\t\t\t\t\t\tfor(let i = 0;i < tempFilePaths.length; i++) {\n\t\t\t\t\t\t\tconst uploadTask = uni.uploadFile({\n\t\t\t\t\t\t\t  url : that.$API.upload(),\n\t\t\t\t\t\t\t  filePath: tempFilePaths[i],\n\t\t\t\t\t\t\t  name: 'file',\n\t\t\t\t\t\t\t  formData: {\n\t\t\t\t\t\t\t   'token': that.token\n\t\t\t\t\t\t\t  },\n\t\t\t\t\t\t\t  success: function (uploadFileRes) {\n\t\t\t\t\t\t\t\t  let count = 0;\n\t\t\t\t\t\t\t\t  count++;\n\t\t\t\t\t\t\t\t  if(count==tempFilePaths.length){\n\t\t\t\t\t\t\t\t\t  setTimeout(function () {\n\t\t\t\t\t\t\t\t\t  \tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t  }, 1000);\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\tvar data = JSON.parse(uploadFileRes.data);\n\t\t\t\t\t\t\t\t\t//var data = uploadFileRes.data;\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: data.msg,\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tif(data.code==1){\n\t\t\t\t\t\t\t\t\t   var url = data.data.url;\n\t\t\t\t\t\t\t\t\t   that.picList.push(url);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},fail:function(){\n\t\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t   \n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tuploadVideo(){\n\t\t\t\tvar that = this;\n\t\t\t\t\n\t\t\t\tuni.chooseVideo({\n\t\t\t\t\tsourceType: ['camera', 'album'],\n\t\t\t\t\tcompressed:false,\n\t\t\t\t\tsuccess: (responent) => {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: \"加载中\"\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet videoFile = responent.tempFilePath;\n\t\t\t\t\t\tconst uploadTask = uni.uploadFile({\n\t\t\t\t\t\t  url : that.$API.upload(),\n\t\t\t\t\t\t  filePath:videoFile,\n\t\t\t\t\t\t  name: 'file',\n\t\t\t\t\t\t  formData: {\n\t\t\t\t\t\t   'token': that.token\n\t\t\t\t\t\t  },\n\t\t\t\t\t\t  success: function (uploadFileRes) {\n\t\t\t\t\t\t\t  setTimeout(function () {\n\t\t\t\t\t\t\t  \tuni.hideLoading();\n\t\t\t\t\t\t\t  }, 1000);\n\t\t\t\t\t\t\t\tvar data = JSON.parse(uploadFileRes.data);\n\t\t\t\t\t\t\t\t//var data = uploadFileRes.data;\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: data.msg,\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tif(data.code==1){\n\t\t\t\t\t\t\t\t   var url = data.data.url;\n\t\t\t\t\t\t\t\t   that.pic = url;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},fail:function(){\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: \"网络异常，上传失败！\",\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t   \n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tpicClose(item){\n\t\t\t\tvar that = this;\n\t\t\t\tvar picList = that.picList;\n\t\t\t\tvar list = [];\n\t\t\t\tfor(var i in picList){\n\t\t\t\t\tif(picList[i]!=item){\n\t\t\t\t\t\tlist.push(picList[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthat.picList = list;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":""}